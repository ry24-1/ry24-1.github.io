<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>äººå¤§é™„ä¸­äº¦åº„æ–°åŸå­¦æ ¡2024çº§1ç­</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="shortcut icon" href="/resources/images/logo.png">
		<link rel="stylesheet" href="/resources/css/header.css">
		<link rel="stylesheet" href="/resources/css/paragraph.css">
		<link rel="stylesheet" href="/resources/css/search.css">
	</head>
	<body style="background-color: #d4d2ff; text-align: center;">
	<header>
		<ul class="topnav">
			<li><a class="active" href="/">ä¸»é¡µ</a></li>
			<li><a href="/files/">æ–‡ä»¶</a></li>
			<li><a href="/gallery/">å›¾åº“</a></li>
			<li><a href="/homework/">ä½œä¸š</a></li>
			<li><a href="/news/">æ–°é—»</a></li>
			<li><a href="/subjects/">å­¦ç§‘</a></li>
			<li><a href="/more/">æ›´å¤š</a></li>
			<li class="right"><a href="/about/">å…³äº</a></li>
		</ul>
	</header>
		<div class="search-container">
			<div class="search-header">
				<p style="font-weight: bold; font-size: 30px;">ç­çº§æ–‡ä»¶èµ„æºæ£€ç´¢ç³»ç»Ÿ</p>
				<p>æ ¹æ®æ–‡ä»¶åç§°ã€ç±»å‹æˆ–å­¦ç§‘è¿›è¡Œæ£€ç´¢ï¼ˆæ³¨ï¼šæœ¬ç«™ä»…ä¿å­˜2025å¹´7æœˆ1æ—¥ä»¥åçš„å„ä¸ªæ–‡ä»¶ï¼Œä½œæ–‡é›†é™¤å¤–ï¼‰</p>
			</div>
			<div class="search-box">
				<input type="text" id="search-input" placeholder="è¾“å…¥æ–‡ä»¶åç§°åŠå…³é”®è¯...">
				<button id="search-button">æœç´¢</button>
			</div>
			<div class="filter-options">
				<div class="filter-group">
					<label for="file-type"><p>æ–‡ä»¶ç±»å‹</p></label>
					<select id="file-type">
						<option value="">æ‰€æœ‰ç±»å‹</option>
						<option value="pdf">PDFæ–‡æ¡£</option>
						<option value="docx">Wordæ–‡æ¡£</option>
						<option value="pptx">PPTæ¼”ç¤º</option>
						<option value="xlsx">Excelè¡¨æ ¼</option>
						<option value="zip">zipå‹ç¼©æ–‡ä»¶</option>
					</select>
				</div>
				<div class="filter-group">
					<label for="subject"><p>å­¦ç§‘åˆ†ç±»</p></label>
					<select id="subject">
						<option value="">æ‰€æœ‰å­¦ç§‘</option>
						<option value="chinese">è¯­æ–‡</option>
						<option value="math">æ•°å­¦</option>
						<option value="english">è‹±è¯­</option>
						<option value="physics">ç‰©ç†</option>
						<option value="chemistry">åŒ–å­¦</option>
						<option value="biology">ç”Ÿç‰©</option>
						<option value="history">å†å²</option>
						<option value="geography">åœ°ç†</option>
						<option value="politics">æ”¿æ²»</option>
						<option value="others">å…¶ä»–</option>
					</select>
				</div>
			</div>
			<div id="search-results" class="search-results" style="display: none;"></div>
		</div>
		<footer>
			<p>ç‰ˆæƒæ‰€æœ‰ &copy; 2025 äººå¤§é™„ä¸­äº¦åº„æ–°åŸå­¦æ ¡2024çº§1ç­</p>
		</footer>
		<script>
		    let fileData = [];
		    const searchInput = document.getElementById('search-input');
		    const searchButton = document.getElementById('search-button');
		    const fileTypeSelect = document.getElementById('file-type');
		    const subjectSelect = document.getElementById('subject');
		    const searchResults = document.getElementById('search-results');
		    document.addEventListener('DOMContentLoaded', function() {
		        loadFileData();
		    });
		    function loadFileData() {
		        searchResults.innerHTML = '<div class="no-results">æ­£åœ¨åŠ è½½æ–‡ä»¶æ•°æ®...</div>';
		        searchResults.style.display = 'block';
		        fetch('file_data.json')
		            .then(response => {
		                if (!response.ok) {
		                    throw new Error('ç½‘ç»œå“åº”ä¸æ­£å¸¸');
		                }
		                return response.json();
		            })
		            .then(data => {
		                fileData = data;
		                displayResults(fileData);
		            })
		            .catch(error => {
		                console.error('åŠ è½½æ–‡ä»¶æ•°æ®å‡ºé”™:', error);
		                searchResults.innerHTML = 
		                    '<div class="no-results">æ— æ³•åŠ è½½æ–‡ä»¶æ•°æ®ï¼Œè¯·ç¨åå†è¯•ã€‚</div>';
		                searchResults.style.display = 'block';
		            });
		    }
		    function performSearch() {
		        const query = searchInput.value.trim().toLowerCase();
		        const fileType = fileTypeSelect.value;
		        const subject = subjectSelect.value;
		        if (!fileData.length) {
		            alert('æ–‡ä»¶æ•°æ®æ­£åœ¨åŠ è½½ä¸­ï¼Œè¯·ç¨å€™...');
		            return;
		        }
		        if (!query && !fileType && !subject) {
		            displayResults(fileData);
		            return;
		        }
		        const results = fileData.filter(file => {
		            const textMatch = !query || 
		                file.title.toLowerCase().includes(query) || 
		                file.filename.toLowerCase().includes(query) || 
		                file.description.toLowerCase().includes(query);
		            const typeMatch = !fileType || file.type === fileType;
		            const subjectMatch = !subject || file.subject === subject;
		            return textMatch && typeMatch && subjectMatch;
		        });
		        displayResults(results);
		    }
		    function displayResults(results) {
		        searchResults.innerHTML = '';
		        if (results.length === 0) {
		            searchResults.style.display = 'block';
		            searchResults.innerHTML = '<div class="no-results">æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ–‡ä»¶ã€‚</div>';
		            return;
		        }
		        results.forEach(file => {
		            const resultElement = document.createElement('div');
		            resultElement.className = 'result-item';
		            const fileExt = file.filename.split('.').pop().toLowerCase();
		            resultElement.innerHTML = `
		                <div class="file-icon ${file.type}">${fileExt}</div>
		                <div class="file-info">
		                    <div class="file-title">${file.title}</div>
		                    <div class="file-meta">
		                        <span><i>ğŸ“„</i> ${file.filename}</span>
		                        <span><i>ğŸ“š</i> ${getSubjectName(file.subject)}</span>
		                        <span><i>ğŸ“</i> ${file.size}</span>
		                        <span><i>ğŸ“…</i> ${file.date}</span>
		                    </div>
		                    <div class="file-desc">${file.description}</div>
		                </div>
		                <a href="${file.downloadUrl}" class="download-btn" download>ä¸‹è½½</a>
		            `;
		            
		            searchResults.appendChild(resultElement);
		        });
		        searchResults.style.display = 'block';
		    }
		    function getSubjectName(subjectCode) {
		        const subjects = {
		           chinese: "è¯­æ–‡",
					math: "æ•°å­¦",
					english: "è‹±è¯­",
					physics: "ç‰©ç†",
					chemistry: "åŒ–å­¦",
					biology: "ç”Ÿç‰©",
					history: "å†å²",
					geography: "åœ°ç†",
					politics: "é“å¾·ä¸æ³•æ²»",
					others: "å…¶ä»–"
		        };
		        return subjects[subjectCode] || subjectCode;
		    }
		    searchButton.addEventListener('click', performSearch);
		    searchInput.addEventListener('keypress', function(e) {
		        if (e.key === 'Enter') {
		            performSearch();
		        }
		    });
		    fileTypeSelect.addEventListener('change', performSearch);
		    subjectSelect.addEventListener('change', performSearch);
		</script>
	</body>
</html>